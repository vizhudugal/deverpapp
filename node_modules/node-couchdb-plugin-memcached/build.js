'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _memcached = require('memcached');

var _memcached2 = _interopRequireDefault(_memcached);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

class Cache {
    constructor() {
        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
        }

        this._cache = new (Function.prototype.bind.apply(_memcached2.default, [null].concat(args)))();
    }

    get(key) {
        return new Promise((resolve, reject) => {
            this._cache.get(key, (err, data) => {
                if (err) {
                    reject(err);
                } else {
                    resolve(data || null);
                }
            });
        });
    }

    set(key, value) {
        return new Promise((resolve, reject) => {
            this._cache.set(key, value, 0, (err, data) => {
                if (err) {
                    reject(err);
                } else {
                    resolve();
                }
            });
        });
    }

    invalidate() {
        return new Promise((resolve, reject) => {
            this._cache.flush(err => {
                if (err) {
                    reject(err);
                } else {
                    resolve();
                }
            });
        });
    }
}exports.default = Cache;
;
module.exports = exports['default'];
